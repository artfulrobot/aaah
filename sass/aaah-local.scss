@import 'lib';

// Fonts {{{
// generated by https://google-webfonts-helper.herokuapp.com/fonts/work-sans?subsets=latin
/* work-sans-300 - latin */
@font-face {
  font-family: 'Work Sans';
  font-style: normal;
  font-weight: 300;
  src: url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-300.eot'); /* IE9 Compat Modes */
  src: local(''),
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-300.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-300.woff2') format('woff2'), /* Super Modern Browsers */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-300.woff') format('woff'), /* Modern Browsers */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-300.ttf') format('truetype'), /* Safari, Android, iOS */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-300.svg#WorkSans') format('svg'); /* Legacy iOS */
}

/* work-sans-regular - latin */
@font-face {
  font-family: 'Work Sans';
  font-style: normal;
  font-weight: 400;
  src: url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-regular.eot'); /* IE9 Compat Modes */
  src: local(''),
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-regular.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-regular.woff2') format('woff2'), /* Super Modern Browsers */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-regular.woff') format('woff'), /* Modern Browsers */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-regular.ttf') format('truetype'), /* Safari, Android, iOS */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-regular.svg#WorkSans') format('svg'); /* Legacy iOS */
}

/* work-sans-600 - latin */
@font-face {
  font-family: 'Work Sans';
  font-style: normal;
  font-weight: 600;
  src: url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-600.eot'); /* IE9 Compat Modes */
  src: local(''),
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-600.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-600.woff2') format('woff2'), /* Super Modern Browsers */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-600.woff') format('woff'), /* Modern Browsers */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-600.ttf') format('truetype'), /* Safari, Android, iOS */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-600.svg#WorkSans') format('svg'); /* Legacy iOS */
}

/* work-sans-italic - latin */
@font-face {
  font-family: 'Work Sans';
  font-style: italic;
  font-weight: 400;
  src: url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-italic.eot'); /* IE9 Compat Modes */
  src: local(''),
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-italic.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-italic.woff2') format('woff2'), /* Super Modern Browsers */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-italic.woff') format('woff'), /* Modern Browsers */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-italic.ttf') format('truetype'), /* Safari, Android, iOS */
       url('/sites/default/themes/aaah/fonts/work-sans-v9-latin-italic.svg#WorkSans') format('svg'); /* Legacy iOS */
}
/* hind-700 - latin */
@font-face {
  font-family: 'Hind';
  font-style: normal;
  font-weight: 700;
  src: url('../fonts/hind-v11-latin-700.eot'); /* IE9 Compat Modes */
  src: local(''),
       url('../fonts/hind-v11-latin-700.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('../fonts/hind-v11-latin-700.woff2') format('woff2'), /* Super Modern Browsers */
       url('../fonts/hind-v11-latin-700.woff') format('woff'), /* Modern Browsers */
       url('../fonts/hind-v11-latin-700.ttf') format('truetype'), /* Safari, Android, iOS */
       url('../fonts/hind-v11-latin-700.svg#Hind') format('svg'); /* Legacy iOS */
}
// }}}
// Mixins {{{
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  text-indent: 1px;
  margin:0;
  padding:0;
}
@mixin normal-content-width {
  max-width: 1200px;
  padding: 0 0.5rem;
  margin-left: auto;
  margin-right: auto;
}
@mixin white-links {
  a:link { color: white; }
  a:visited { color: white; }
  a:hover { color: white; text-decoration: underline; }
  a:active { color: $dcn_orange; }
}
@mixin breakpoint_mobile_only {
  @media screen and (max-width: 767px) {
    @content
  }
}
@mixin breakpoint_ipad {
  @media screen and (min-width: 768px) {
    @content
  }
}
// }}}
// Utility {{{
.vh { @include visually-hidden; }
.fit-cover { object-fit: cover; }
// Fonts {{{
.font-display {
  font-family: Hind;
  font-weight: 700;
}
.font-lighter {
  // We have this for Work Sans.
  font-weight: 300;
}
// }}}
// Colours {{{
// }}}
// Flex {{{
.df { display: flex; }
.fjc-sb { justify-content: space-between; }
.fai-top { align-items: top; }
.fi-a { flex: 1 1 auto; }

// Flex direction
.fd-col { flex-direction: column; }
// Flex order
.fo-1 { order: 1; }
.fo-2 { order: 2; }
.fo-3 { order: 3; }

@media screen and (min-width: 576px) {
  .df-m { display: flex; }
  .fi-2-m {
    // 2 cols.
    flex: 1 0 45%;
  }
  .fo-1-m { order: 1; }
  .fo-2-m { order: 2; }
  .fo-3-m { order: 3; }
}
// }}}
// Padding and margins {{{
// .pr1 { padding-right:0.5rem; };
// .pr2 { padding-right:1rem; };
// .pr3 { padding-right:2rem; };
.p0 { padding: 0; }
.ph2 { padding: 1rem; }
.ph3 { padding: 2rem; }
.pr4 { padding-right:3rem; }
.pv4 { padding-top: 3rem; padding-bottom: 3rem; }
.m0 { padding: 0; }
.ml1 { margin-left: 0.5rem; }
.mh3 { margin-left: 2rem;  margin-right: 2rem; }
.mh-3 { margin-left: -2rem; margin-right: -2rem; }
@media screen and (min-width: 576px) {
  .pt0-m { padding-top:0; }
  .ph3-m { padding: 2rem; }
}
// }}}
// Widths, heights {{{
.w100 { width: 100%; }
.w-auto { width: auto; }
.h100 { height: 100%; }
.h-auto { height: auto; }
// }}}
// Lists {{{
ls-none { list-style: none; }
// }}}
// Display {{{
.db { display: block; }
.dn { display: none; }
// }}}
// Position {{{
.pos-a { position: absolute; }
.pos-r { position: relative; }
@media screen and (min-width: 576px) {
  .pos-a-m { position: absolute; }
  .pos-r-m { position: relative; }
}
// }}}
// Overflow {{{
.ov-h { overflow: hidden; }
// }}}
.dcn-veil // {{{
{
  height: 100%;
  background-color: transparentize($colourDCNBlue, 0.3);
} // }}}
.normal-content-width // {{{
{
  @include normal-content-width;
} // }}}
// }}}
// Reset ..field-collection-view {{{
.field-collection-view {
  padding:0;
  margin:0;
  border-bottom:medium none;
}
// }}}
// Global {{{

// Hide the admin-menu on mobile, it just gets in the way.
#admin-menu { display: none; }
@media screen and (min-width: 576px) {
  #admin-menu { display: block; }
  body.admin-menu { }
}

// Override
@media screen and (max-width: 575px) {
  html body.admin-menu {
    margin-top: 0 !important;
  }
}

#page {
  border-top: 0.5rem solid $colourDCNBlue;
}
#main {
  min-height:70vh; // we don't want any white space after the footer.
}
// }}}
// Component: links {{{
a:link { color: $colourCompliment; }
a:visited { color: $colourCompliment; }
a:hover { color: $colourDCNBlue; }
a:active { color: $colourDCNBlue; }

// }}}
// Component: i.dcn-icon {{{
i.dcn-icon {
  background:url('/sites/default/themes/barrio_dcn/images/sprite.svg');
  background-position: 0 0;
  background-repeat:no-repeat;
  width:24px;
  height:24px;
  overflow: hidden;
  padding:0;
  margin:0;
  display: inline-block;
  &.author { background-position: 0 0; }
  &.when   { background-position: -24px 0; }
  &.exclamation { background-position: -48px 0; }
}
.dcn-icon-message {
  margin:1rem 0;
  display:grid;
  grid-template-columns: auto 1fr;
  background-color: white;

  .dcn-icon-message__icon {
    grid-column:1;
    padding:1rem;
  }
  .dcn-icon-message__text {
    grid-column:2;
    padding:1rem;
  }
}
//}}}
// Component: header {{{
#site-header {
  position: relative;
  padding: 1rem 0.5rem;
  background: white;
}
#header-logo {
  width: 10rem;
  width: clamp(10rem, 20vw, 15rem);
  height: auto;
}
// }}}
// Component: messages {{{
div.messages {
  max-width: clamp(30ch, 70%, 64ch);
  margin: 1rem auto;
  background: white;
  border: solid 1px $colourDCNBlue;
  color: $colourDCNBlueDark;
  padding: 1rem;
}
//}}}
// Component: menu {{{
// Handle mobile.
#header__menu-toggle {
  position:absolute;
  z-index: 1;
  top:0.5rem;
  right:0.5rem;
  border-radius: 2rem;
  padding: 0.25em 0.75em;
  font-size: (14rem/16);
  text-transform:uppercase;
  border:solid 1px map_get($colours, 'g8');
  cursor:pointer;
  background-color:white;
}
#block-menu-menu-main-menu-2021 {
  h2 {
    @include visually-hidden;
  }

  // Style shared between mobile and desktop
  a:link, a:visited { text-decoration: none; color:$colourDCNBlue;  }
  a:hover, a:active { background-color: transparentize($colourDCNBlue, 0.9); color:$colourDCNBlueDark; }
}

body.is-mobile {
  &.menu--show {
    position:fixed;
    overflow: hidden;

    #header__menu-toggle {
      background-color: $colourDCNBlueDark;
      color: white;
    }
  }

  #block-menu-menu-main-menu-2021 {
    transition: transform 0.3s;
    transform: translateX(100vw);

    position:fixed;
    z-index: 2;
    width:100%;
    top: 4rem;
    left:0;
    bottom:0;
    background: white;
    overflow: auto;
    padding: 0.5rem;


    ul.depth-1 {
      margin: 0;
      padding: 0.5rem;

      li { list-style:none; padding:0; }

      a {
        display: block;
        padding: 0.5rem;
      }

      &>*+* {
        margin-top: 0.5rem;
      }
      &>li>div>a {
        background: white;
      }
      // next level normally hidden.
      ul.depth-2 { display: none; }
      &>li.active-trail {
        background-color: $colourBackground;

        // Reveal
        ul.depth-2 { display: block; }
      }

    }
    ul.depth-2 {
      padding: 0.5rem;
      margin: 0;
    }
  }
  // Allow 2rem for top menu.
  &.menu--show #block-menu-menu-main-menu-2021 {
    transform: none;
  }
}
// Desktop menus.
@media screen and (min-width: 576px) {
  #block-menu-menu-main-menu-2021 {
    margin-top: 1rem;

    .depth-1 {
      margin:0;
      padding:0;
      display: flex;

      &>li {
        list-style: none;
        flex: 1 0 auto;
        margin:0;
        padding:0;

        &>div>a {
          display: block;
          text-align: center;
          padding: 0.25em 0.75em;
          text-decoration:none;

          border-bottom: solid 2px transparent;
          &:hover {
            border-bottom-color: map_get($colours, 'g7');
          }
        }

        &.active-trail>div>a {
          border-bottom-color: map_get($colours, 'primary');
        }
      }
    }

    $d: 0.2s;
    .depth-2 {
      position:absolute;
      z-index: 1;
      margin: 0;
      padding: 0;
      background: $colourBackground;
      border-left: solid 2px $colourDCNBlue;

      max-height:0;
      overflow:hidden;
      opacity:0;
      transition: opacity cubic-bezier(0.77, 0, 0.175, 1) $d, max-height $d $d;
    }

    .depth-1>li:hover .depth-2 {
      max-height: 100vw;
      opacity: 1;
      transition: opacity cubic-bezier(0.77, 0, 0.175, 1) $d, max-height $d 0s;

      box-shadow: 0 10px 20px 3px rgba(0, 0, 0, 0.1);
    }

    .depth-2 li {
      list-style: none;
      margin:0.5rem 0;
      padding:0;
      a { display: block; padding: 0.25rem 1rem; }
    }
  }
}
//}}}
// Component: white-box {{{
.white-box {
  background-color: white;
  margin:0 auto;
  width: 40rem;
  max-width: 90%;
  max-width: 90vw;
}
//}}}
// Component: Paragraph: pp-over-image {{{
.paragraphs-item-pp-over-image {
  background-size: cover;
  background-position: center;
  .dcn-veil {
    min-height: 22rem;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
} //}}}
// Component: Paragraph: pp-t-i-side {{{
.paragraphs-item-pp-t-i-side {
  .field_text {
    h2:first-child, h3:first-child { margin-top: 0; }
  }
  &.has-caption {
    img {
      border-radius: 8px 8px 0 0 ;
    }
  }

  .field_caption {
    border-radius: 0 0 8px 8px;
    background: white;
    p {
      margin-bottom:0;
    }
  }
}//}}}
// Component: Card A {{{
.node-article.view-mode-card_a {
  &:hover {
    box-shadow: nth($box-shadows-list, 1);
  }
  a {
    text-decoration:none;
    color: unset;
  }
  footer {
    border-top: solid 1px map_get($colours, 'g7');
  }
}
// }}}
// Component: footer{{{
#site-footer {
  border-top: solid 4px $colourDCNBlue;
  background: $colourDCNBlueDark;
  color: white;
  padding-top: 2rem;

  a:link, a:visited { color: $colourBackground; text-decoration: none; }
  a:hover, a:active { text-decoration:underline; }

  #block-menu-menu-footer-menu {
    ul.menu {
      margin: 1rem 0;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;

      &>li {
        margin: 0;
        padding: 0 1rem;
        list-style: none;
      }

    }
  }
  #block-social-media-links-social-media-links {
    text-align: center;
  }
  .copyright {
    font-size: 1rem;
    text-align: center;
    padding: 2rem 0;
  }


}
// }}}
// Component: ar-link artfulrobot tagline v2 {{{
@keyframes ar-anim { 0% { transform:translateY(0); } 30% { transform:translateY(-0.3em); color:#fc8; } 60% { transform:translateY(0.2em); } 80% { transform:translateY(-0.15em); } 0% { transform:translateY(0); } }
a.ar-link:visited,
a.ar-link:link { text-decoration:none !important;  }
a.ar-link:hover { border-bottom:solid 1px; color: white; }
a.ar-link span {display:inline-block;}
a.ar-link:hover span { animation-name: ar-anim; animation-duration: 0.6s; animation-timing-function: ease; }
a.ar-link span.ar-a { animation-delay:0s; }
a.ar-link span.ar-r { animation-delay:0.05s; }
a.ar-link span.ar-t { animation-delay:0.10s; }
a.ar-link span.ar-f { animation-delay:0.15s; }
a.ar-link span.ar-u { animation-delay:0.20s; }
a.ar-link span.ar-l { animation-delay:0.25s; }
a.ar-link span.ar-r2{ animation-delay:0.30s; }
a.ar-link span.ar-o { animation-delay:0.32s; }
a.ar-link span.ar-b { animation-delay:0.35s; }
a.ar-link span.ar-o2{ animation-delay:0.38s; }
a.ar-link span.ar-t2{ animation-delay:0.40s; }
// }}}
// Component: Tables {{{
table {
  width:auto;
  border:medium none;
  border-collapse: collapse;
}
td, th {
  padding:0.5rem 0.75rem;
  border:solid 1px $colourBackground;
  background: white;
  vertical-align: top;
  p:last-child {
    margin-bottom:0;
  }
}
td.active {
  background: white;
}
th {
  border-bottom: solid 1px $g5;
  font-weight:bold;
  background-color:$colourBackground;
  text-align:left;
}

// ar-responsive tables - see   https://github.com/artfulrobot/arTables

.ar-responsive {
  tr:nth-child(even) { background: $dcn_blue_wash_lighter; }
  tr:nth-child(odd) { background: $dcn_blue_wash_greyer; }
}
.arr-table { margin-bottom: 2rem; }
.arr-tr { padding-bottom: 1rem; padding: 0.5rem 1rem; border-bottom: solid 1px #d0d0d0; }
.arr-tr.even { background: $dcn_blue_wash_lighter; }
.arr-tr.odd { background: $dcn_blue_wash; }
.arr-th { font-size: 0.8em; opacity: 0.8; }
.arr-td { margin-bottom: 0.5rem; }
.arr-td>*:first-child { margin-top: 0; }

.arr-filters {
  display:flex;
  flex-wrap: wrap;
  margin: 1rem 0;
  padding: 1rem 0;
  background: #f8f8f8;
  border: solid 1px #f0f0f0;
  border-radius: 3px;
}
.arr-filter {
  flex: 0 0 auto;
  padding: 0 1rem;
  margin-bottom: 1rem;
  label { padding-right: 0.5rem; }
}


// }}}
// Component: videos-three {{{
.videos-three {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}
.videos-three__item {
  flex: 1 0 100px;
  padding: 1rem;
}
// }}}
// Pages: Node: body field {{{
.field-name-body {
  @include normal-content-width;
  padding-bottom: 4rem;
}
// }}}
// Pages: Views {{{
#block-system-main>.content>.view {
  @include normal-content-width;
  padding-bottom: 4rem;
}
// }}}

// Fix invisible Qty field on shopping cart {{{
#uc-cart-view-form td.qty {
  min-width:7rem;
}
// }}}
// Improve layout for some CiviCRM forms {{{
.crm-profile-name-Membership,
.crm-profile-name-Communication_Preferences_70 {
  .crm-section {
    .label {
      float:none;
      width:100%;
      padding:0;
      text-align:left;
      white-space:normal;
    }
    .content { margin-left:0; }
  }
}
// }}}
// Forum formatting {{{
@include breakpoint_mobile_only {
  body.page-forum {
    .tabs--primary.nav-tabs {
      display:none;
    }
  }
}
@include breakpoint_ipad {
  body.page-forum {
    .tabs--primary.nav-tabs {
      display:block;
      margin-bottom: 2rem;
    }
  }
}

// The Main forum index https://dcn.artfulrobot.uk/forum {{{

// Forum headers
.forum-table-superheader {
  background: $dcn_blue_light;
  color:white;
  margin-bottom: 1rem;
  @include white_links;
}
article.forum-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  margin-bottom: 2rem;
  border:solid 1px #eee;

  .forum-post-title,
  .forum-post-by {
    padding:0 0.5rem 0 0;
  }
  .forum-post-date {
    padding:0;
  }
  .forum-post-by { display:none; }
}
@include breakpoint_mobile_only {
  article.forum-row {
    .forum-post-by { display:none; }
  }
}
// header
.forum-details {
  grid-row: 1;
  grid-column: 1 / span 2;
  padding:0.5rem 1rem 0.5rem;
  h1 {
    margin:0;
    font-size: 2.3rem;
  }
}
.forum-name-icons-wrapper {
  display:flex;
  align-items: center;
  .forum-name {
    flex: 1 1 auto;
  }
  .forum-list-icon {
    flex: 0 0 auto;
  }
}
.forum-number-topics {
  background: #eee;
  padding: 1rem;
  grid-row: 2;
  grid-column: 1;
}
.forum-number-posts {
  background: #eee;
  padding: 1rem;
  grid-row: 2;
  grid-column: 2;
  text-align:right;
}
article.forum-row  {
  .forum-last-reply {
    background: #eee;
    padding: 0 1rem 1rem;
    grid-row: 3;
    grid-column: 1 / span 2;
    display: flex;
    &>.forum-post-title {
      flex: 1 1 auto;
      padding-right:2rem;
    }
    &>.forum-post-by {
      flex: 0 0 auto;
      padding-right:1rem;
    }
    &>.forum-post-date {
      flex: 0 0 auto;
      text-align:right;
    }
  }
}
//}}}
// A Forum index (topic index), e.g. https://dcn.artfulrobot.uk/forums/general-discussion {{{
.forum-table-topics {
}
article.forum-topic {
  margin-bottom: 2rem;
  border:solid 1px #eee;

  .forum-topic-title {
    font-size: 2.3rem;
  }

  .forum-topic-latest {
    background: #f0f0f0;
    padding:0.5rem 1rem;
  }
  .forum-topic-author {
  }
  .forum-topic-date {
  }
}
.forum-topic-title-meta {
  padding: 0.5rem 1rem;
}
@include breakpoint_ipad {
  .forum-topic-title-meta {
    display:flex;
    padding: 0.5rem 1rem;

    .forum-topic-title {
      flex: 1 1 auto;
    }
    .forum-topic-meta {
      flex: 0 0 26rem;
    }
  }
}
@include breakpoint_mobile_only {
  .views-field-topic-icon { display:none; }
}
// }}}
// A forum post (may be the node (topic/first post) or a post (comment) e.g. https://dcn.artfulrobot.uk/forum/seeking-siblings {{{
div.forum-post {
  margin:2rem -2rem;
  padding: 0 2rem;
  margin:1px -2rem 0;
  padding: 1rem 2rem;
  background: $g8;

  // Highlight office posts.
  &.posted-by-3 .forum-post-content {
    color: $dcn_blue_dark;
  }

  display: grid;
  //grid-template-columns: 20rem 1fr;
  grid-gap: 0;
}
.forum-post-info {
  padding:1rem;

  display:grid;
  grid-template-columns:50% 50%;
  grid-gap: 2rem;

  .author-pane {
    display: inline-block;
  }

  .forum-posted-on {
    float:none;
    font-size: 1.4rem; // bootstrap sets rem=10px
    padding:0;
    color: $g3;
  }
  .forum-posted-number {
  }
}
.forum-post-info__author {
  grid-column:1;
}
.forum-post-info__when {
  grid-column:2;
}
.forum-post-info__author,
.forum-post-info__when {
  display:flex;
  align-items: top;
  &>.dcn-icon {
    flex:0 0 auto;
  }
  &>span {
    flex:1 1 auto;
    padding-left: 1rem;
  }
  margin-bottom: 1rem;
}
.forum-post-wrapper {
  //grid-column:2; grid-row:1;
  position:relative;
}
.forum-post-panel-main {
  float:none;
  margin:0;
  padding:1.5rem 2rem;
  height:100%;
  position:relative;
  z-index:1;
  min-height: 10rem;
  display:flex;
  flex-direction: column;

  background: white;
  box-shadow: -2px 2px 5px rgba(0,0,0, 0.2);

  .forum-decorative-arrow {
    &:before,
    &:after {
      position:absolute;
      content:'';
      border-bottom:20px solid white;
      border-left:20px solid transparent;
      border-top:20px solid transparent;
      border-right:20px solid transparent;
      width:0;
      height:0;
      left:20px;
      left: calc(50% - 30px);
      top: -40px;
    }
    &:before {
      border-bottom:20px solid rgba(0,0,0,0.2);
      left: calc(50% - 32px);
      top: -40px;
    }
  }
  .forum-post-content {
    flex:1 0 auto;
    font-size:1.6rem; // 16px
    padding:0;
  }
  ul.links {
    flex:0 0 auto;
    margin:0;
    text-align: right;
    li {
      float:none;
      display:inline-block;
    }
  }
}

.forum-post-panel-sub {
  float:none;
  width:auto;

  .author-pane {
    margin:0 0 1rem;
  }
}
.forum-post-panel-main {
}
.forum-post-footer {
  height:auto;
  display:flex;

  .author-pane {
    flex: 0 0 auto;
    a { line-height: 2em; }
  }
  .forum-post-links {
    flex: 1 1 auto;
  }
}
// Format the top post in a topic {{{
// .forum-topic is added to the wrapper around the top post.
.forum-topic .forum-post-panel-main {
  border:solid 1px $dcn_blue_light;

  .forum-decorative-arrow {
    &:before {
      border-bottom-color: $dcn_blue_light;
    }
  }
}
// }}}
@include breakpoint_ipad {

  div.forum-post {
    grid-template-columns: 20rem 1fr;
  }
  .forum-post-info {
    grid-column:1;
    grid-row:1;

    // Disable block layout
    display:block;
  }
  .forum-post-wrapper {
    grid-column:2; grid-row:1;
  }
  .forum-post-info__when .date { display:block; }

  .forum-post-panel-main {
    .forum-decorative-arrow {
      &:before,
      &:after {
        position:absolute;
        content:'';
        border-left:0 none;
        border-right:20px solid white;
        border-top:20px solid transparent;
        border-bottom:20px solid transparent;
        width:0;
        height:0;
        left:-20px;
        top: 20px;
        top: calc(50% - 30px);
      }
      &:before {
        left:-20px;
        top:22px;
        top: calc(50% - 28px);
        border-right-color: rgba(0,0,0,0.2);
      }
    }
  }
  .forum-topic .forum-post-panel-main {
    .forum-decorative-arrow {
      &:before {
        border-right-color: $dcn_blue_light;
        border-bottom-color: transparent;
      }
    }
  }
}
// }}}
.forum-comment-pager {
  background: $g8;
  margin:0 -2rem;
  padding: 2rem;
}
// Forum comment form {{{
#forum-comment-form-wrapper {
  margin: 0 -2rem;
  padding: 2rem;
  background: $dcn_blue_light;
  color:white;
  a.username { color:white; }

  #edit-author--2 {
    margin-top: 2rem;
    font-size:16px;
  }
  label {
    font-size:16px;
  }

  button {
    background: white;
    color: $dcn_blue_dark;

    border-radius:3px;
    text-transform: uppercase;
    display: block;
    margin:1rem 0 1rem auto;
    border:none;
    padding:1rem 2rem;

    &:active {
      background: $dcn_blue_dark;
      color:white;
    }
  }


  .form-item-subject,
  .filter-wrapper, .wysiwyg-toggle-wrapper,
  .form-item-notify-type
  {
    display:none;
  }
}
// }}}

// }}}
// Library {{{
.library-item {
  display: flex;
  align-items: flex-start;
  flex-wrap:wrap;
  margin: 1.5rem 0;
  background: white;
  box-shadow: -2px 2px 5px rgba(0,0,0, 0.2);

  .views-field-field-author {
    color: $g3;
    margin-bottom: 1rem;
  }

}
.library-item__image {
  flex: 0 1 100%;
  padding:1rem;
  a { display: block; }
  img {
    display: block;
    margin: 0 auto;
    max-height:200px;
    width:auto;
  }
}
.library-item__text {
  flex: 1 0 200px;
  padding:1rem 1rem;
  h1 {
    margin-top:0;
    font-size: (18rem/10);
  }
}
.library-item__meta {
  padding:1rem 1rem;
  flex: 0 0 auto;
}
@media screen and (min-width: 768px) {
  .library-item {
    flex-wrap:nowrap;
  }
  .library-item__image {
    flex: 0 1 200px;
    img {
        max-width:100%;
        max-height:none;
        height:auto;
      }
  }
  .library-item__text {
    h1 {
      font-size: (22rem/10);
    }
  }
}
#views-exposed-form-library-listings-page {
  background-color:  $dcn_blue_wash;
  border-radius:3px;
  padding: 1rem;
  .views-exposed-widgets {
    display: flex;
    flex-wrap: wrap;
    .views-exposed-widget {
      flex: 1 0 auto;
      padding:0 0.5rem;
      input, button { width: 100%;}
    }
  }
}
// }}}
// Members' menu {{{
#block-menu-block-13 {
  background-color: #f5f5f5;
  padding: 1rem;
  h2.block-title {
    padding: 0 1rem;
    margin:0 0 1rem;
    text-align: center;
  }
  ul.menu.nav {
    float:none;
    li {
      display: block;
      a {
        text-align: center;
        display: block;
        &:link, &:visited {
          background: $dcn_blue_light;
          color:white !important;
        }
        &:hover, &:active {
          background: $dcn_blue_dark;
          color:white !important;
        }
      }
    }
  }
}
// }}}

// Specific page: groups-listings {{{
body.page-node-3443 {
  .arr-th:nth-child(9),
  .arr-td:nth-child(10) { display: none; }
  .ar-responsive tr {
    td:nth-child(5),
    th:nth-child(5) { display: none; }
  }
  &.logged-in {
    .arr-th:nth-child(9),
    .arr-td:nth-child(10)
    { display: block; }
    .ar-responsive tr {
      td:nth-child(5),
      th:nth-child(5) { display: table-cell; }
    }
  }
}
// }}}

.force-white-text // {{{
{
// This is used on over image.
  color:white;
  h1, h2, h3, p { color:white; }
}//}}}
// Responsive images .image-max and .image-max-100 {{{
.image-max-100 {
  img {
    max-width:100%;
    height: auto;
    display:block;
  }
}
.image-100 {
  img {
    width:100%;
    height: auto;
    display:block;
  }
}
//}}}
